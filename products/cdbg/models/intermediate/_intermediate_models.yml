version: 2

models:
- name: int__block_groups
  description: residential area and low-to-moderate income data aggregated by census block group
  columns:
  - name: geoid
    tests: [unique, not_null]
  - name: borough_name
  - name: tract
  - name: block_group
  - name: total_floor_area
  - name: residential_floor_area
  - name: residential_floor_area_percentage
  - name: total_population
  - name: lowmod_population
  - name: lowmod_population_percentage

- name: int__lot_block_groups_details
  description: int__lot_block_groups joined to pluto for lot info
  columns:
  - name: bbl
  - name: block_group_geoid
  - name: overlap_ratio
  - name: bldgarea
  - name: bldgarea_in_block_group
  - name: resarea
  - name: resarea_in_block_group

- name: int__lot_block_groups_raw
  description: unique intersections of pluto lots and census block groups with proportion of lot in block group
  columns:
  - name: bbl
  - name: block_group_geoid
  - name: overlap_ratio
  
- name: int__lot_block_groups
  description: >-
    unique intersections of pluto lots and census block groups with proportion of lot in block group,
    corrected to assign lots fully to block groups that contain 90%+ of a lot
  columns:
  - name: bbl
  - name: block_group_geoid
  - name: overlap_ratio
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns: [bbl, block_group_geoid]

- name: int__tracts
  description: residential area and low-to-moderate income data aggregated by census tract
  columns:
  - name: geoid
    tests: [unique, not_null]
  - name: borough_name
  - name: tract
  - name: block_group
  - name: total_floor_area
  - name: residential_floor_area
  - name: residential_floor_area_percentage
  - name: total_population
  - name: lowmod_population
  - name: lowmod_population_percentage
