FROM ghcr.io/osgeo/gdal:ubuntu-small-3.6.4

RUN apt update && export DEBIAN_FRONTEND=noninteractive \
    && apt -y install postgresql-client python3-pip python3-distutils jq wget zip unzip git bash-completion locales

RUN curl -O https://dl.min.io/client/mc/release/linux-amd64/mc \
    && chmod +x mc \
    && mv ./mc /usr/bin/ 

RUN wget https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 -O /usr/bin/yq && chmod +x /usr/bin/yq

COPY bash/ bash/
COPY python python/

RUN bash/install_python_packages.sh python \
    && rm -rf bash \
    && rm -rf python
