FROM nycplanning/docker-geosupport:latest

RUN apt-get update && export DEBIAN_FRONTEND=noninteractive \
    && apt-get -y install postgresql-client-15 libpq-dev jq wget bash-completion gdal-bin

RUN wget https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 -O /usr/bin/yq && chmod +x /usr/bin/yq

RUN curl -O https://dl.min.io/client/mc/release/linux-amd64/mc \
    && chmod +x mc \
    && mv ./mc /usr/bin/ 

COPY bash/ bash/
COPY python python/

RUN bash/install_python_packages.sh python \
    && rm -rf bash \
    && rm -rf python
