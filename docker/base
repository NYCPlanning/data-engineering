FROM nycplanning/docker-geosupport:latest

RUN apt-get update && export DEBIAN_FRONTEND=noninteractive \
    && apt-get -y install postgresql-client libpq-dev jq bash-completion gdal-bin

RUN curl -O https://dl.min.io/client/mc/release/linux-amd64/mc \
    && chmod +x mc \
    && mv ./mc /usr/bin/ 

COPY ../bash/ bash/
COPY ../python python/

RUN bash/compile_python_packages.sh python \
    && bash/install_python_packages python \
    && rm -rf bash 
    && rm -rf python