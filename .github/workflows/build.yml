name: üèóÔ∏è Build a Dataset

on:
  pull_request:
    branches:
      - main
  workflow_dispatch:
    inputs:
      dataset_name:
        description: "Which dataset to build"
        type: choice
        required: true
        options:
          - template
      do_export:
        description: "Whether to export build outputs"
        type: boolean
        required: true
        default: false
      logging_level:
        description: "Logging level"
        type: choice
        required: true
        default: WARNING
        options:
          - WARNING
          - INFO
          - DEBUG
      build_note:
        description: "A short note about this build (optional)"
        type: string
        required: false
# env:
#   DATASET_NAME: ${{ inputs.dataset_name }}
#   DO_EXPORT: ${{ inputs.do_export }}
#   LOGGING_LEVEL: ${{ inputs.logging_level }}
#   BUILD_NOTE: ${{ inputs.build_note }}

jobs:
  template:
    if: inputs.dataset_name == 'template'
    uses: ./.github/workflows/template_build.yml
    with:
      do_export: ${{ inputs.do_export }}
      logging_level: ${{ inputs.logging_level }}
      build_note: ${{ inputs.build_note }}
    secrets: inherit
  # cbbr:
  #   if: inputs.dataset_name == 'cbbr'
  #   uses: ./.github/workflows/cbbr_build.yml
  #   with:
  #     do_export: ${DO_EXPORT}
  #     build_note: ${BUILD_NOTE}
  #     logging_level: ${LOGGING_LEVEL}
  #   secrets: inherit