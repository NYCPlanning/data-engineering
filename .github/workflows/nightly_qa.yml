name: ⚙️ Nightly QA

on:
  workflow_dispatch:
    inputs:
      build_name:
        description: Name of the build environment
        type: string
        default: nightly_qa
  schedule:
    - cron: "0 5 * * *"

jobs:
  test:
    uses: ./.github/workflows/test_helper.yml
    secrets: inherit
  
  build:
    uses: ./.github/workflows/build.yml
    secrets: inherit
    with:
      dataset_name: all
      build_note: nightly qa
      recipe_file: recipe
      dev_image: false
      build_name: ${{ inputs.build_name || 'nightly_qa' }}
