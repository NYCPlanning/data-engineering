{"definitionName": "Soda Core CLI", "defaultDataSource": "template_db", "dataTimestamp": "2024-05-01T21:10:49+00:00", "scanStartTimestamp": "2024-05-01T21:10:49+00:00", "scanEndTimestamp": "2024-05-01T21:10:49+00:00", "hasErrors": false, "hasWarnings": true, "hasFailures": true, "metrics": [{"identity": "metric-Soda Core CLI-template_db-bpl_libraries-region-invalid_count-100af2f0", "metricName": "invalid_count", "value": 0}, {"identity": "metric-Soda Core CLI-template_db-null_count = 0-2b19371b", "metricName": "null_count = 0", "value": 0.0}, {"identity": "metric-Soda Core CLI-template_db-bpl_libraries-title-missing_count", "metricName": "missing_count", "value": 0}, {"identity": "metric-Soda Core CLI-template_db-bpl_libraries-schema", "metricName": "schema", "dataSourceName": "template_db", "tableName": "bpl_libraries", "partitionName": null, "columnName": null, "value": [{"columnName": "ogc_fid", "sourceDataType": "integer"}, {"columnName": "wkb_geometry", "sourceDataType": "USER-DEFINED"}, {"columnName": "title", "sourceDataType": "character varying"}, {"columnName": "address", "sourceDataType": "character varying"}, {"columnName": "phone", "sourceDataType": "character varying"}, {"columnName": "position", "sourceDataType": "character varying"}, {"columnName": "bus", "sourceDataType": "character varying"}, {"columnName": "subway", "sourceDataType": "character varying"}, {"columnName": "monday", "sourceDataType": "character varying"}, {"columnName": "tuesday", "sourceDataType": "character varying"}, {"columnName": "wednesday", "sourceDataType": "character varying"}, {"columnName": "thursday", "sourceDataType": "character varying"}, {"columnName": "friday", "sourceDataType": "character varying"}, {"columnName": "saturday", "sourceDataType": "character varying"}, {"columnName": "sunday", "sourceDataType": "character varying"}, {"columnName": "hours", "sourceDataType": "character varying"}, {"columnName": "closingmsg", "sourceDataType": "character varying"}, {"columnName": "access", "sourceDataType": "character varying"}, {"columnName": "tags", "sourceDataType": "character varying"}, {"columnName": "path", "sourceDataType": "character varying"}, {"columnName": "branchid", "sourceDataType": "character varying"}, {"columnName": "pickuploc", "sourceDataType": "character varying"}, {"columnName": "branchlist", "sourceDataType": "character varying"}, {"columnName": "region", "sourceDataType": "character varying"}, {"columnName": "latitude", "sourceDataType": "double precision"}, {"columnName": "longitude", "sourceDataType": "double precision"}, {"columnName": "data_library_version", "sourceDataType": "text"}]}, {"identity": "metric-Soda Core CLI-template_db-bpl_libraries-row_count", "metricName": "row_count", "value": 61}, {"identity": "metric-Soda Core CLI-template_db-bpl_libraries-wkb_geometry-missing_count", "metricName": "missing_count", "value": 0}, {"identity": "metric-Soda Core CLI-template_db-bpl_libraries-title-duplicate_count", "metricName": "duplicate_count", "value": 0}, {"identity": "metric-Soda Core CLI-template_db-invalid_count_geom = 0-08d99445", "metricName": "invalid_count_geom = 0", "value": 61.0}], "checks": [{"identity": "73b166a5", "identities": {"v1": "ee6bca62", "v2": "67be9d36", "v3": "73b166a5"}, "migratedIdentities": null, "name": "row_count > 0", "type": "generic", "definition": "checks for bpl_libraries:\n  row_count > 0", "resourceAttributes": [], "location": {"filePath": "bpl_libraries_checks.yml", "line": 2, "col": 5}, "dataSource": "template_db", "table": "bpl_libraries", "column": null, "metrics": ["metric-Soda Core CLI-template_db-bpl_libraries-row_count"], "outcome": "pass", "diagnostics": {"blocks": [], "value": 61, "fail": {"lessThanOrEqual": 0.0}}, "source": "soda-core"}, {"identity": "cce306ac", "identities": {"v1": "2ecbd686", "v2": "bb9198ad", "v3": "cce306ac"}, "migratedIdentities": null, "name": "null_count = 0", "type": "generic", "definition": "checks for bpl_libraries:\n  - null_count = 0:\n      null_count query: |\n        SELECT COUNT(wkb_geometry) \n        FROM bpl_libraries\n        WHERE wkb_geometry = NULL\n\n", "resourceAttributes": [], "location": {"filePath": "bpl_libraries_checks.yml", "line": 20, "col": 5}, "dataSource": "template_db", "table": "bpl_libraries", "column": null, "metrics": ["metric-Soda Core CLI-template_db-null_count = 0-2b19371b"], "outcome": "pass", "diagnostics": {"blocks": [], "value": 0.0, "fail": {"greaterThan": 0.0, "lessThan": 0.0}}, "source": "soda-core"}, {"identity": "aea0b7c6", "identities": {"v1": "2cce9941", "v2": "6c20ed18", "v3": "aea0b7c6"}, "migratedIdentities": null, "name": "invalid_count_geom = 0", "type": "generic", "definition": "checks for bpl_libraries:\n  - invalid_count_geom = 0:\n      invalid_count_geom query: SELECT COUNT(*) FROM bpl_libraries WHERE public.ST_SRID(wkb_geometry)\n        != 2263\n\n  # example of schema checks\n", "resourceAttributes": [], "location": {"filePath": "bpl_libraries_checks.yml", "line": 26, "col": 5}, "dataSource": "template_db", "table": "bpl_libraries", "column": null, "metrics": ["metric-Soda Core CLI-template_db-invalid_count_geom = 0-08d99445"], "outcome": "fail", "diagnostics": {"blocks": [], "value": 61.0, "fail": {"greaterThan": 0.0, "lessThan": 0.0}}, "source": "soda-core"}, {"identity": "753dd32a", "identities": {"v1": "58ff6dcc", "v2": "40585bc7", "v3": "753dd32a"}, "migratedIdentities": null, "name": "Schema Check", "type": "generic", "definition": "checks for bpl_libraries:\n  - schema:\n      warn:\n        when wrong column type:\n          title: character varying\n          region: integer\n      fail:\n        when required column missing: [title, region, wkb_geometry]\n", "resourceAttributes": [], "location": {"filePath": "bpl_libraries_checks.yml", "line": 32, "col": 5}, "dataSource": "template_db", "table": "bpl_libraries", "column": null, "metrics": ["metric-Soda Core CLI-template_db-bpl_libraries-schema"], "outcome": "warn", "diagnostics": {"blocks": [{"type": "csv", "text": "Column,Type\nogc_fid,integer\nwkb_geometry,USER-DEFINED\ntitle,character varying\naddress,character varying\nphone,character varying\nposition,character varying\nbus,character varying\nsubway,character varying\nmonday,character varying\ntuesday,character varying\nwednesday,character varying\nthursday,character varying\nfriday,character varying\nsaturday,character varying\nsunday,character varying\nhours,character varying\nclosingmsg,character varying\naccess,character varying\ntags,character varying\npath,character varying\nbranchid,character varying\npickuploc,character varying\nbranchlist,character varying\nregion,character varying\nlatitude,double precision\nlongitude,double precision\ndata_library_version,text", "title": "Schema"}, {"type": "csv", "text": "Column,Event,Details\n\nregion,:icon-warn: Type Mismatch, Expected Type: integer; Actual Type: character varying", "title": "Diagnostics"}], "column_additions": [], "column_deletions": [], "column_index_changes": {}, "column_index_mismatches": {}, "column_type_changes": {}, "column_type_mismatches": {"region": {"expected_type": "integer", "actual_type": "character varying"}}, "missing_column_names": [], "present_column_names": [], "preferredChart": "bars", "valueLabel": "1 schema event(s)", "valueSeries": {"values": [{"label": "fail", "value": 0, "outcome": "fail"}, {"label": "warn", "value": 1, "outcome": "warn"}, {"label": "pass", "value": 26, "outcome": "pass"}]}}, "source": "soda-core"}, {"identity": "cd8e8b07", "identities": {"v1": "854f732d", "v2": "985de23e", "v3": "cd8e8b07"}, "migratedIdentities": null, "name": "duplicate_count(title) = 0", "type": "generic", "definition": "checks for bpl_libraries:\n  duplicate_count(title) = 0", "resourceAttributes": [], "location": {"filePath": "bpl_libraries_checks.yml", "line": 3, "col": 5}, "dataSource": "template_db", "table": "bpl_libraries", "column": "title", "metrics": ["metric-Soda Core CLI-template_db-bpl_libraries-title-duplicate_count"], "outcome": "pass", "diagnostics": {"blocks": [], "value": 0, "fail": {"greaterThan": 0.0, "lessThan": 0.0}}, "source": "soda-core"}, {"identity": "6d5eee61", "identities": {"v1": "60f2d5ca", "v2": "b85ab376", "v3": "6d5eee61"}, "migratedIdentities": null, "name": "missing_count(title) = 0", "type": "generic", "definition": "checks for bpl_libraries:\n  missing_count(title) = 0", "resourceAttributes": [], "location": {"filePath": "bpl_libraries_checks.yml", "line": 4, "col": 5}, "dataSource": "template_db", "table": "bpl_libraries", "column": "title", "metrics": ["metric-Soda Core CLI-template_db-bpl_libraries-title-missing_count"], "outcome": "pass", "diagnostics": {"blocks": [], "value": 0, "fail": {"greaterThan": 0.0, "lessThan": 0.0}}, "source": "soda-core"}, {"identity": "ae9d9f8a", "identities": {"v1": "1173d288", "v2": "d253c2a9", "v3": "ae9d9f8a"}, "migratedIdentities": null, "name": "invalid_count(region) = 0", "type": "generic", "definition": "checks for bpl_libraries:\n  - invalid_count(region) = 0:\n      valid values:\n        - \"NewLots\"\n        - \"CrownHeights\"\n        - \"KingsHighway\"\n        - \"ParkSlope\"\n        - \"NewUtrecht\"\n        - \"Central\"\n        - \"CBH\"\n        - \"Flatbush\"\n\n", "resourceAttributes": [], "location": {"filePath": "bpl_libraries_checks.yml", "line": 5, "col": 5}, "dataSource": "template_db", "table": "bpl_libraries", "column": "region", "metrics": ["metric-Soda Core CLI-template_db-bpl_libraries-region-invalid_count-100af2f0"], "outcome": "pass", "diagnostics": {"blocks": [], "value": 0, "fail": {"greaterThan": 0.0, "lessThan": 0.0}}, "source": "soda-core"}, {"identity": "bf1572d7", "identities": {"v1": "ecfb3d1d", "v2": "ffbfabdd", "v3": "bf1572d7"}, "migratedIdentities": null, "name": "No NULL values in wkb_geometry column", "type": "generic", "definition": "checks for bpl_libraries:\n  - missing_count(wkb_geometry) = 0:\n      name: No NULL values in wkb_geometry column # optional: add check description\n\n  # example of same check above using a custom check\n", "resourceAttributes": [], "location": {"filePath": "bpl_libraries_checks.yml", "line": 16, "col": 5}, "dataSource": "template_db", "table": "bpl_libraries", "column": "wkb_geometry", "metrics": ["metric-Soda Core CLI-template_db-bpl_libraries-wkb_geometry-missing_count"], "outcome": "pass", "diagnostics": {"blocks": [], "value": 0, "fail": {"greaterThan": 0.0, "lessThan": 0.0}}, "source": "soda-core"}], "queries": [{"name": "template_db.bpl_libraries.aggregation[0]", "dataSource": "template_db", "table": "bpl_libraries", "partition": null, "column": null, "sql": "SELECT \n  COUNT(*),\n  COUNT(CASE WHEN title IS NULL THEN 1 END),\n  COUNT(CASE WHEN NOT (region IS NULL) AND NOT (region IN ('NewLots','CrownHeights','KingsHighway','ParkSlope','NewUtrecht','Central','CBH','Flatbush')) THEN 1 END),\n  COUNT(CASE WHEN wkb_geometry IS NULL THEN 1 END) \nFROM main.bpl_libraries", "exception": null, "duration": "0:00:00.039625"}, {"name": "template_db.bpl_libraries.title.duplicate_count", "dataSource": "template_db", "table": "bpl_libraries", "partition": null, "column": "title", "sql": "\nWITH frequencies AS (\n    SELECT COUNT(*) AS frequency\n    FROM main.bpl_libraries\n    WHERE title IS NOT NULL\n    GROUP BY title)\nSELECT COUNT(*)\nFROM frequencies\nWHERE frequency > 1", "exception": null, "duration": "0:00:00.018723"}, {"name": "template_db.bpl_libraries.title.duplicate_count.failing_sql", "dataSource": "template_db", "table": "bpl_libraries", "partition": null, "column": "title", "sql": "\nWITH frequencies AS (\n    SELECT title\n    FROM main.bpl_libraries\n    WHERE title IS NOT NULL\n    GROUP BY title\n    HAVING COUNT(*) > 1)\nSELECT main.*\nFROM main.bpl_libraries main\nJOIN frequencies ON main.title = frequencies.title\n", "exception": null, "duration": null}, {"name": "template_db.bpl_libraries.title.duplicate_count.passing_sql", "dataSource": "template_db", "table": "bpl_libraries", "partition": null, "column": "title", "sql": "\nWITH frequencies AS (\n    SELECT title\n    FROM main.bpl_libraries\n    WHERE title IS NOT NULL\n    GROUP BY title\n    HAVING COUNT(*) <= 1)\nSELECT main.*\nFROM main.bpl_libraries main\nJOIN frequencies ON main.title = frequencies.title\n", "exception": null, "duration": null}, {"name": "template_db.bpl_libraries.title.duplicate_count.failing_rows_sql_aggregated", "dataSource": "template_db", "table": "bpl_libraries", "partition": null, "column": "title", "sql": "\nWITH frequencies AS (\n    SELECT title, COUNT(*) AS frequency\n    FROM main.bpl_libraries\n    WHERE title IS NOT NULL\n    GROUP BY title)\nSELECT *\nFROM frequencies\nWHERE frequency > 1\nORDER BY frequency DESC\nLIMIT 100", "exception": null, "duration": null}, {"name": "template_db.bpl_libraries.duplicate_count[title].failed_rows.aggregated", "dataSource": "template_db", "table": "bpl_libraries", "partition": null, "column": null, "sql": "\nWITH frequencies AS (\n    SELECT title, COUNT(*) AS frequency\n    FROM main.bpl_libraries\n    WHERE title IS NOT NULL\n    GROUP BY title)\nSELECT *\nFROM frequencies\nWHERE frequency > 1\nORDER BY frequency DESC\nLIMIT 100", "exception": null, "duration": "0:00:00.022308"}, {"name": "template_db.user_defined_query[null_count = 0]", "dataSource": "template_db", "table": null, "partition": null, "column": null, "sql": "SELECT COUNT(wkb_geometry) \nFROM bpl_libraries\nWHERE wkb_geometry = NULL", "exception": null, "duration": "0:00:00.023320"}, {"name": "template_db.user_defined_query[invalid_count_geom = 0]", "dataSource": "template_db", "table": null, "partition": null, "column": null, "sql": "SELECT COUNT(*) FROM bpl_libraries WHERE public.ST_SRID(wkb_geometry) != 2263", "exception": null, "duration": "0:00:00.034047"}, {"name": "template_db.bpl_libraries.schema[bpl_libraries]", "dataSource": "template_db", "table": "bpl_libraries", "partition": null, "column": null, "sql": "SELECT column_name, data_type, is_nullable \nFROM information_schema.columns \nWHERE lower(table_name) = 'bpl_libraries' \n  AND lower(table_catalog) = 'db-template' \n  AND lower(table_schema) = 'main'\nORDER BY ORDINAL_POSITION", "exception": null, "duration": "0:00:00.037399"}], "automatedMonitoringChecks": [], "profiling": [], "metadata": [], "logs": [{"level": "info", "message": "Soda Core 3.3.2", "timestamp": "2024-05-01T21:10:49+00:00", "index": 1}, {"level": "info", "message": "Scan summary:", "timestamp": "2024-05-01T21:10:49+00:00", "index": 2}, {"level": "info", "message": "6/8 checks PASSED: ", "timestamp": "2024-05-01T21:10:49+00:00", "index": 3}, {"level": "info", "message": "    bpl_libraries in template_db", "timestamp": "2024-05-01T21:10:49+00:00", "index": 4}, {"level": "info", "message": "      row_count > 0 [PASSED]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 5}, {"level": "info", "message": "      null_count = 0 [PASSED]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 6}, {"level": "info", "message": "      duplicate_count(title) = 0 [PASSED]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 7}, {"level": "info", "message": "      missing_count(title) = 0 [PASSED]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 8}, {"level": "info", "message": "      invalid_count(region) = 0 [PASSED]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 9}, {"level": "info", "message": "      No NULL values in wkb_geometry column [PASSED]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 10}, {"level": "info", "message": "1/8 checks WARNED: ", "timestamp": "2024-05-01T21:10:49+00:00", "index": 11}, {"level": "info", "message": "    bpl_libraries in template_db", "timestamp": "2024-05-01T21:10:49+00:00", "index": 12}, {"level": "info", "message": "      Schema Check [WARNED]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 13}, {"level": "info", "message": "        warn_column_type_mismatch[region] expected(integer) actual(character varying)", "timestamp": "2024-05-01T21:10:49+00:00", "index": 14}, {"level": "info", "message": "        schema_measured = [ogc_fid integer, wkb_geometry USER-DEFINED, title character varying, address character varying, phone character varying, position character varying, bus character varying, subway character varying, monday character varying, tuesday character varying, wednesday character varying, thursday character varying, friday character varying, saturday character varying, sunday character varying, hours character varying, closingmsg character varying, access character varying, tags character varying, path character varying, branchid character varying, pickuploc character varying, branchlist character varying, region character varying, latitude double precision, longitude double precision, data_library_version text]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 15}, {"level": "info", "message": "1/8 checks FAILED: ", "timestamp": "2024-05-01T21:10:49+00:00", "index": 16}, {"level": "info", "message": "    bpl_libraries in template_db", "timestamp": "2024-05-01T21:10:49+00:00", "index": 17}, {"level": "info", "message": "      invalid_count_geom = 0 [FAILED]", "timestamp": "2024-05-01T21:10:49+00:00", "index": 18}, {"level": "info", "message": "        check_value: 61.0", "timestamp": "2024-05-01T21:10:49+00:00", "index": 19}, {"level": "info", "message": "Oops! 1 failure. 1 warning. 0 errors. 6 pass.", "timestamp": "2024-05-01T21:10:49+00:00", "index": 20}], "sourceOwner": "soda-core"}