name: db-colp
display_name: City Owned and Leased Property (COLP)
summary: "Raw Summary"
description: "Raw Description"
each_row_is_a: ""
tags: ["a", "b"]

columns:
  - name: uid
    display_name: Unique ID
    is_primary_key: True
    data_source: Department of City Planning
    description: ""
    data_type: text
    example: cbe20732be28f6ab445289d7a67bb241

package:
  zip_files:
  - name: csv_package
    filename: csv_package.zip
    contains:
      - name: primary_csv
        filename: colp_{{ version }}.csv
      - name: colp_readme
        filename: colp_readme.pdf
  dataset_files:
    - name: primary_shapefile
      filename: colp_single_feature_shp.zip
      type: shapefile
      overrides:
        ignore_validation: ["AGREEMENT", "DCPEDITED", "FINALCOM"]
        columns:
          GEOM:
            name: geometry
            data_type: geom_point
        display_name: "display_name overridden at the dataset_file level"
        description: "description overridden at the dataset_file level"
    - name: primary_csv
      filename: colp_single_feature.csv
      type: csv
      overrides:
        omit_columns: ["GEOM"]
  attachments:
    - name: colp_readme
      filename: colp_readme.pdf

destinations:
  # Socrata
  - id: socrata_prod
    type: socrata
    four_four: "fn4k-qyk2"
    datasets:
      - primary_shapefile
    attachments:
      -  colp_readme
    omit_columns: [dcpedited, uid]
    overrides:
      display_name: "display_name overridden at the destination level"
  - id: socrata_unparsed
    type: socrata
    four_four: "fn4k-abcd"
    is_unparsed_dataset: true
    datasets:
      - primary_shapefile
    attachments:
      -  "colp_readme.pdf"
    omit_columns: []
    overrides:
      display_name: "display_name overridden at the destination level"
      destination_file_name: shapefile_blob_{{ version }}
  # BYTES
  - id: bytes
    type: bytes
    files:
      - id: csv_package
        url: https://s-media.nyc.gov/agencies/dcp/assets/files/zip/data-tools/bytes/colp_{{ version }}_csv.zip
      - id: colp_readme
        url: https://s-media.nyc.gov/agencies/dcp/assets/files/pdf/data-tools/bytes/colp_readme.pdf
