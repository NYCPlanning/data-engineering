version: 2

seeds:
  - name: variables
    columns:
      - name: variable_type
        tests:
          - not_null
          - unique
      - name: label
        tests:
          - not_null
          - unique
      - name: ceqr_category
        tests:
          - not_null
      - name: survey_question
      - name: type_ii_criteria_description
        tests:
          - not_null

  - name: zoning_district_categories
    description: All GFT zoning district categories
    columns:
      - name: category_type
          - not_null
          - unique
      - name: label
        tests: [not_null]

  - name: zoning_district_mappings
    description: All PLUTO zoning district types and their GFT zoning district categories
    columns:
      - name: pluto_zoning_type
        tests:
          - unique
      - name: category_type
        tests:
            - not_null
            - relationships:
                to: ref('zoning_district_categories')
                field: category_type

  - name: nyc_parks_properties_categories
    description: All possible values in typecategory column of recipe dpr_parksproperties
    columns:
      - name: typecategory
        tests:
          - not_null
          - unique
      - name: allowed
        tests:
          - not_null
          - accepted_values:
              values: ["TRUE", "FALSE"]

  - name: test_expected__pilot_projects
    description: Mock pilot projects and their expected outputs
    config:
      column_types:
        # empty columns default to integer type
        Unpermitted Industrial Sources: text
        Vent Towers: text
        (E) Designations - Air Quality: text
        (E) Designations - Noise: text
        Arterial Highways: text
        (E) Designations - HazMat: text
        Special Coastal Risk Districts: text
        NYC Parks properties: text
        POPS: text
        Waterfront Public Access Areas: text
        Publicly Owned Waterfront: text
        NYS Parks Property: text
        Federal Parks property: text
        # columns where ids are numeric need to be manually set to text
        bbl: text
        State Regulated Freshwater Wetlands - Checkzone: text
        geom: geometry(Geometry, 2263)
    columns:
      - name: project_label
        tests:
          - not_null
      - name: bbl
        tests:
          - not_null
          - unique
      - name: geom
        tests:
          - not_null
          - is_epsg_2263

  - name: test_expected__flags_zoning
    description: Particular lots, their zoning fields, and the expected GFT zoning flag results
    columns:
      - name: lot_label
        tests:
          - not_null
      - name: bbl
        tests:
          - not_null
          - unique
      - name: zonedist1
      - name: zonedist2
      - name: zonedist3
      - name: zonedist4
      - name: Zoning Districts
    config:
      column_types:
        bbl: text
